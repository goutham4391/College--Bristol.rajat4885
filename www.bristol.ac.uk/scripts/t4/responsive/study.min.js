/* author: ben.calder@bristol.ac.uk */!function(){var a="",b=document.getElementById("pagetitle"),c=document.getElementById("did-you-know"),d=document.getElementById("what-students-think"),e=document.querySelector(".run-prospectus-script")?!0:!1,f=document.querySelector(".run-pg-prospectus-script")?!0:!1,g='<div style="text-align: center"><img src="http://www.bristol.ac.uk/scripts/utilities/loading.png" alt="loading" style="width: 16px !important; height: 16px;" /></div>',h=["Faculty of Arts","Faculty of Life Sciences","Faculty of Engineering","Faculty of Health Sciences","Faculty of Science","Faculty of Social Sciences and Law"],i=function(){var a=b.getAttribute("data-faculty");if(a){var c=h.indexOf(a),d=!1;if(0>c&&""!==a)for(var e=0;e<h.length;e++)if(h[e].match(a)){a=h[e],d=!0;break}d||(a=void 0)}else{var f=document.querySelector(".primaryFaculty");f&&(a=f.innerHTML,a.indexOf("</a>")>-1?(a=a.split("</a>")[0],a=a.split('">')[1],a=a.trim()):a=void 0)}return a},j=function(a,b,c){return quoteList=c.replace("<ul>",'<ul class="list-no-style list-half-spacing">'),'<h2 class="module-heading"><img src="'+a+b+'"><span class="mh-text">Did you know?</span></h2>'+quoteList},k=function(a,b,c,d){return'<img class="img-circle img-circle-right" alt="" src="'+d+c+'"><blockquote><p>'+a+'</p></blockquote><figcaption class="quote-citation">'+b+"</figcaption>"},l=function(a){var b=a.data,c=b["student quotes"][a.getQuoteID()],d=c&&c.quote,e=a.faculty&&b["faculty fallback quotes"][a.faculty],f="";if((void 0==d||""===d)&&void 0!=e){var g=e.length,h=Math.floor(Math.random()*g);c=e[h],d=c&&c.quote}return d&&(f=k(d,c.name,c.imageFile,a.imgPath)),f};if(e?a="/study/media/undergraduate/quotes/quotes-rwd.json":f&&(a="/study/media/postgraduate/quotes/quotes-rwd.json"),e||f){if(c){var m=c.innerHTML;c.innerHTML=g,brisac.u.removeClass("jsHide",c)}if(d){var n=d.innerHTML;d.innerHTML=g,brisac.u.removeClass("jsHide",d)}if(atomic.get(a).success(function(a){var f=i();if(c){if(f){var g=a["faculty quotes"][f];m=j("http://www.bristol.ac.uk/study/media/undergraduate/quotes/faculty/",g.imageFile,g.quote)}c.innerHTML=m}if(d){var h="";h=l(e?{data:a,faculty:f,imgPath:"http://www.bristol.ac.uk/study/media/undergraduate/quotes/subject/",getQuoteID:function(){return b.innerHTML}}:{data:a,faculty:f,imgPath:"http://www.bristol.ac.uk/study/media/postgraduate/quotes/programme/",getQuoteID:function(){var a=String(window.location.pathname);a=a.replace("index.html",""),a=a.slice(0,a.lastIndexOf("/")),a=a.split("/");var b=a.length,c=a[b-1];return c}}),""!==h&&(n=h),d.innerHTML=n}}).error(function(){console.log("data not available"),d&&(d.innerHTML=n),c&&(c.innerHTML=m)}),e){var o=document.getElementById("kis-module"),p=document.getElementById("kis-widget"),q=p&&p.getAttribute("data-course");if(o&&p&&q.length>0){var r=o.getAttribute("data-kismode");"part-time only"==r&&p.setAttribute("data-kismode","PartTime"),yepnope.injectJs("//discoveruni.gov.uk/widget/embed-script",function(){brisac.u.removeClass("jsHide",o)})}}}if(document.querySelector){var s=b.innerHTML.indexOf("Find a course")>-1,t=b.innerHTML.indexOf("Find a programme")>-1,u=document.getElementById("subject-to-approval");if(e||s||t){var v=document.querySelector(".subject-page")?!0:!1,w=function(a,b){if(a)for(var c=a.querySelectorAll(".module-heading"),d=c&&c.length,e=0;d>e;e++){var f=c[e];headingContent=f&&f.innerHTML,f.innerHTML='<span class="mh-text">'+headingContent+"</span>",b&&brisac.u.addClass("right-col",a)}};if((s||t)&&(u.className="module bg-stone icon-info"),v){brisac.u.addClass("subject-page",brisac.g.bodyTag);var x=document.getElementById("disclaimer"),y=x&&brisac.u.node_after(x),z=document.querySelector("section.main-col"),A=z&&z.querySelector(".module");w(y,!0),A&&(A.className="module bg-d-blue",w(A))}else if(s){var B=document.querySelector(".course-az"),C=B.querySelector(".module-box");C&&(C.className="module tint-bg-b-blue full-width",w(C))}else if(t){var C=document.querySelector(".programme-az");C&&(C.className="module tint-bg-b-aqua programme-az full-width")}else{var D,E,F=document.querySelector(".module-accreditation");if(F)D=F;else{var G=document.getElementById("international"),H=document.getElementById("fees");D=G?G:H}E=brisac.u.node_after(D),w(F,!0),w(E,!0)}}}}();
